const converter=new showdown.Converter;class ArticleFiller{constructor(){this.articleData,this.articleMd,this.article,this.pageData,this.pageURL,this.callPageDisplay=!0,this.whatPageDisplay="index"}static retrieveArticleData(){fetch("/src/articleArchive/articleData.json").then((response=>response.json())).then((articleData=>{ArticleFiller.articleData=articleData,ArticleFiller.callArticle()})).catch((error=>{console.error("Error retrieving article data:",error)}))}static callArticle(){const docURL=document.URL,[,query]=docURL.split("?");if(!query)return void ArticleFiller.callDisplay();const[articleTitle]=query.split("&");if(1===query.split("&").length){ArticleFiller.grabArticle(articleTitle);const featuredArticles=document.getElementById("featuredArticles"),displayArticles=document.getElementById("displayArticles"),articleBody=document.getElementById("articleBody");featuredArticles&&featuredArticles.setAttribute("hidden",!0),displayArticles&&displayArticles.setAttribute("hidden",!0),articleBody&&articleBody.removeAttribute("hidden")}else ArticleFiller.callDisplay()}static grabArticle(articleName){const tempName=articleName.split(" ");articleName="";for(const name of tempName){articleName+=name[0].toUpperCase()+name.slice(1)}if(ArticleFiller.articleData&&articleName){const articleData=ArticleFiller.articleData[articleName];if(articleData){this.updateMetaData(articleData,articleName);const authorFolder=`author${articleData.author.replace(/\s/g,"")}`,articleFolder=`${articleData.date}_${articleName}`;fetch(`/src/articleArchive/${authorFolder}/${articleFolder}/${articleName}.md`).then((response=>response.text())).then((articleMd=>{ArticleFiller.articleMd=articleMd,ArticleFiller.addToPage()})).catch((error=>{console.error(error),ArticleFiller.articleMd="Error retrieving article",ArticleFiller.addToPage()}))}else ArticleFiller.articleMd="Error retrieving article",ArticleFiller.addToPage()}}static updateMetaData(articleData,articleKey){if(Object.keys(articleData)?.length>0){let structuredData=document?.querySelector("script[type='application/ld+json']")?.textContent;if(structuredData=structuredData?JSON.parse(structuredData):void 0,articleData?.title){const title=`${articleData.title} | Small Dev Talk`;document.title=title,document.querySelector("meta[property='og:title']").setAttribute("content",title),document.querySelector("meta[property='twitter:title']").setAttribute("content",title),structuredData?.name&&(structuredData.name=title)}if(articleData?.summary){const description=`${articleData.summary} | Small Dev Talk`;document.querySelector("meta[name='description']").setAttribute("content",description),document.querySelector("meta[property='og:description']").setAttribute("content",description),document.querySelector("meta[property='twitter:description']").setAttribute("content",description),structuredData?.description&&(structuredData.description=description)}if(articleData?.thumbnail&&articleData?.author&&articleData?.date&&articleKey){const imgURL=`https://smalldevtalk.net/src/articleArchive/author${articleData.author.split(" ").join("")}/${articleData.date}_${articleKey}/${articleData.thumbnail}`;document.querySelector("meta[property='og:image']").setAttribute("content",imgURL),document.querySelector("meta[property='twitter:image']").setAttribute("content",imgURL),structuredData?.image&&(structuredData.image=imgURL)}structuredData&&(document.querySelector("script[type='application/ld+json']").textContent=JSON.stringify(structuredData))}}static addToPage(){ArticleFiller.article=converter.makeHtml(ArticleFiller.articleMd),document.getElementById("articleBody")&&(document.getElementById("articleBody").innerHTML=ArticleFiller.article)}static retrievePageData(){const xhr=new XMLHttpRequest;xhr.responseType="json",xhr.onreadystatechange=()=>{xhr.readyState===XMLHttpRequest.DONE&&200===xhr.status&&(ArticleFiller.pageData=xhr.response,ArticleFiller.callArticle())},xhr.open("GET","/src/legacyPages/legacyPagesDisplay.json"),xhr.send()}static callDisplay(){let useURL=[];const sep=document.URL.split("?");sep.length>1?(useURL=sep[1].split("&"),ArticleFiller.whatPageDisplay=useURL[1]):(useURL=[],ArticleFiller.whatPageDisplay="index"),ArticleFiller.pageURL=useURL,1===ArticleFiller.pageURL.length?ArticleFiller.callPageDisplay=!1:(ArticleFiller.callPageDisplay=!0,"archive"===ArticleFiller.whatPageDisplay?ArticleFiller.displayArchive():ArticleFiller.changeCarousel())}static displayArchive(){document.getElementById("featuredArticles")&&document.getElementById("featuredArticles").setAttribute("hidden",!0),document.getElementById("articleBody")&&document.getElementById("articleBody").removeAttribute("hidden");let archiveDisplay="";const{articleData:articleData}=ArticleFiller;if(articleData)for(const[key,value]of Object.entries(articleData))if(value&&value.title&&value.author&&value.date&&value.thumbnail){archiveDisplay.trim().length<1&&(archiveDisplay+='\n\t\t\t\t\t\t<div class="container-fluid">\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t');const imgURL=`src/articleArchive/author${value.author.split(" ").join("")}/${value.date}_${key}/${value.thumbnail}`;archiveDisplay+=`\n\t\t\t\t\t<div class="col-sm archive-display">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclass="archive-link"\n\t\t\t\t\t\t\thref="${document.location.origin}/index.html?${key}"\n\t\t\t\t\t\t\taria-label="Redirect to ${value.title}"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<p class="archive-title">${value.title}</p>\n\t\t\t\t\t\t\t<img src=${imgURL} alt="${value.title}'s thumbnail" loading="lazy">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t`}archiveDisplay.trim().length>0&&(archiveDisplay+="</div></div>",document.getElementById("displayArticles").innerHTML+=archiveDisplay)}static changeCarousel(){const docTitle=ArticleFiller.whatPageDisplay[0].toUpperCase()+ArticleFiller.whatPageDisplay.substring(1,ArticleFiller.whatPageDisplay.length);if(document.getElementById("pageTitle")&&(document.getElementById("pageTitle").innerText=`Small Dev Talk: ${docTitle}`),ArticleFiller&&ArticleFiller.pageData&&ArticleFiller.articleData&&ArticleFiller.pageData[ArticleFiller.whatPageDisplay]&&ArticleFiller.pageData[ArticleFiller.whatPageDisplay].carousel&&document.getElementById("carouselInner")){const carouselList=ArticleFiller.pageData[ArticleFiller.whatPageDisplay].carousel;document.getElementById("carouselIndicator")&&(document.getElementById("carouselIndicator").innerHTML=""),document.getElementById("carouselInner").innerHTML="";for(let c=0;c<carouselList.length;c+=1){const authorFolder=`author${ArticleFiller.articleData[carouselList[c]].author.split(" ").join("")}`,articleFolder=`${ArticleFiller.articleData[carouselList[c]].date}_${carouselList[c]}`,articleThumbnail=ArticleFiller.articleData[carouselList[c]].thumbnail,articleTitle=ArticleFiller.articleData[carouselList[c]].title,articleSummary=ArticleFiller.articleData[carouselList[c]].summary,url=`/src/articleArchive/${authorFolder}/${articleFolder}/${articleThumbnail}`;let appendStr=`\n\t\t\t\t\t<li\n\t\t\t\t\t\tdata-target="#carouselExampleIndicators"\n\t\t\t\t\t\tdata-slide-to="${c}"\n\t\t\t\t\t\t${0===c?'class="active"':""}\n\t\t\t\t\t></li>\n\t\t\t\t`;document.getElementById("carouselIndicator")&&(document.getElementById("carouselIndicator").innerHTML+=appendStr),appendStr=`\n\t\t\t\t\t<div class="carousel-item ${0===c?"active":""}">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tid="carouselLink${c}"\n\t\t\t\t\t\t\thref="index.html?${carouselList[c]}"\n\t\t\t\t\t\t\taria-label="Redirect to ${articleTitle}"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tid="carouselImage${c}"\n\t\t\t\t\t\t\t\tsrc="${url}"\n\t\t\t\t\t\t\t\tclass="d-block w-100"\n\t\t\t\t\t\t\t\tstyle="width:100%; max-height: 400px !important;"\n\t\t\t\t\t\t\t\tloading="lazy"\n\t\t\t\t\t\t\t\talt="Carousel image for ${articleTitle}"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="carousel-caption d-md-block"\n\t\t\t\t\t\t\t\tstyle="text-shadow: 0 0 3px #000000;"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h5 id="carouselHeader${c}">${articleTitle}</h5>\n\t\t\t\t\t\t\t\t<p id="carouselParagraph${c}">${articleSummary}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t`,document.getElementById("carouselInner").innerHTML+=appendStr}}ArticleFiller.ArticleFiller()}static ArticleFiller(){if(ArticleFiller&&ArticleFiller.pageData&&ArticleFiller.articleData&&ArticleFiller.pageData[ArticleFiller.whatPageDisplay]&&ArticleFiller.pageData[ArticleFiller.whatPageDisplay].displayArticles){const displayList=ArticleFiller.pageData[ArticleFiller.whatPageDisplay].displayArticles;if(document.getElementById("displayArticles").innerHTML="",displayList&&displayList.length>0)for(const d in displayList)if(ArticleFiller.articleData[displayList[d]]){const authorFolder=`author${ArticleFiller.articleData[displayList[d]].author.split(" ").join("")}`,articleFolder=`${ArticleFiller.articleData[displayList[d]].date}_${displayList[d]}`,articleThumbnail=ArticleFiller.articleData[displayList[d]].thumbnail,articleTitle=ArticleFiller.articleData[displayList[d]].title,articleSummary=ArticleFiller.articleData[displayList[d]].summary,articleDate=ArticleFiller.articleData[displayList[d]].date,url=`/src/articleArchive/${authorFolder}/${articleFolder}/${articleThumbnail}`,appendStr=`\n\t\t\t\t\t\t\t<div class="post row" id="featuredArticle${d}">\n\t\t\t\t\t\t\t\t<div class="col-md-4" style="margin-top: 0.5rem;">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref="index.html?${displayList[d]}"\n\t\t\t\t\t\t\t\t\t\taria-label="Redirect to ${articleTitle}"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc="${url}"\n\t\t\t\t\t\t\t\t\t\t\tclass="img-fluid"\n\t\t\t\t\t\t\t\t\t\t\tloading="lazy"\n\t\t\t\t\t\t\t\t\t\t\talt="Thumbnail for ${articleTitle}"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="col-md-8" style="margin-top: 0.5rem;">\n\t\t\t\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref="index.html?${displayList[d]}"\n\t\t\t\t\t\t\t\t\t\t\taria-label="Redirect to ${articleTitle}"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t${articleTitle}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="col-12" style="margin-top: 0.5rem;">\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t${articleSummary}\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref="index.html?${displayList[d]}"\n\t\t\t\t\t\t\t\t\t\t\taria-label="Read more of ${articleTitle}"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tRead More\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="col-12">\n\t\t\t\t\t\t\t\t\t<p class="details">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref="index.html?${displayList[d]}"\n\t\t\t\t\t\t\t\t\t\t\taria-label="Redirect to ${articleTitle}"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t${articleDate}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;document.getElementById("displayArticles").innerHTML+=appendStr}}}}function init(){ArticleFiller.retrievePageData(),ArticleFiller.retrieveArticleData()}function changeCarouselSlide(direction){const carouselItems=document.getElementsByClassName("carousel-item");if(!carouselItems||!carouselItems.length)return;const activeItem=Array.from(carouselItems).find((item=>item.classList.contains("active")));if(!activeItem)return void carouselItems[0].classList.add("active");const nextIndex="next"===direction?(Array.from(carouselItems).indexOf(activeItem)+1)%carouselItems.length:(Array.from(carouselItems).indexOf(activeItem)-1+carouselItems.length)%carouselItems.length;activeItem.classList.remove("active"),carouselItems[nextIndex].classList.add("active")}window.onload=init;