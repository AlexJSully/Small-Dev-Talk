const converter=new showdown.Converter;class ArticleFiller{constructor(){this.articleData,this.articleMd,this.article,this.pageData,this.pageURL,this.callPageDisplay=!0,this.whatPageDisplay="index"}static displayError(t){ArticleFiller.errMsg=t?.trim(),ArticleFiller.errMsg?.length<1&&(ArticleFiller.errMsg="Unknown error"),console.error(ArticleFiller.errMsg),ArticleFiller.article=`\n\t\t\t<div style="width:100%; display:flex; justify-content:center; margin-top:2.5rem;">\n\t\t\t\t<div style="text-align:center;">\n\t\t\t\t\t<div style="font-size:2.5rem; font-weight:700; color:#dc3545; letter-spacing:1px;">\n\t\t\t\t\t\tError\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div style="font-size:1.25rem; color:#333; margin:1rem 0 2rem 0;">\n\t\t\t\t\t\t${ArticleFiller.errMsg}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div style="display:flex; gap:1rem; justify-content:center;">\n\t\t\t\t\t\t<button class="btn btn-warning" style="font-size:1rem;" onclick="window.location.reload();">\n\t\t\t\t\t\t\tRefresh\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<button class="btn btn-primary" style="font-size:1rem;" onclick="window.location.href='index.html';">\n\t\t\t\t\t\t\tHome\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,document?.getElementById("articleBody")&&(document.getElementById("articleBody").innerHTML=ArticleFiller.article)}static retrieveArticleData(){fetch("/src/articleArchive/articleData.json").then((t=>t.json())).then((t=>{ArticleFiller.articleData=t,ArticleFiller.callArticle()})).catch((t=>{console.error("Error retrieving article data:",t)}))}static callArticle(){const t=document.URL,[,e]=t.split("?");if(!e)return void ArticleFiller.callDisplay();const[l]=e.split("&");if(1===e.split("&").length){ArticleFiller.grabArticle(l);const t=document.getElementById("featuredArticles"),e=document.getElementById("displayArticles"),i=document.getElementById("articleBody");t&&t.setAttribute("hidden",!0),e&&e.setAttribute("hidden",!0),i&&i.removeAttribute("hidden")}else ArticleFiller.callDisplay()}static grabArticle(t){const e=t.split(" ");t="";for(const l of e){t+=l[0].toUpperCase()+l.slice(1)}if(ArticleFiller.articleData&&t){const e=ArticleFiller.articleData[t];if(e){this.updateMetaData(e,t);const l=`author${e.author.replace(/\s/g,"")}`,i=`${e.date}_${t}`;fetch(`/src/articleArchive/${l}/${i}/${t}.md`).then((t=>{if(!t.ok)throw new Error(`Failed to fetch article: ${t.status} ${t.statusText}`);return t.text()})).then((t=>{ArticleFiller.articleMd=t,ArticleFiller.addToPage()})).catch((t=>{ArticleFiller.displayError(`Could not retrieve article. Please check the article name or try again later. (${t.message})`)}))}else ArticleFiller.displayError("Error retrieving article.")}}static updateMetaData(t,e){if(Object.keys(t)?.length>0){let l=document?.querySelector("script[type='application/ld+json']")?.textContent;if(l=l?JSON.parse(l):void 0,t?.title){const e=`${t.title} | Small Dev Talk`;document.title=e,document.querySelector("meta[property='og:title']").setAttribute("content",e),document.querySelector("meta[property='twitter:title']").setAttribute("content",e),l?.name&&(l.name=e)}if(t?.summary){const e=`${t.summary} | Small Dev Talk`;document.querySelector("meta[name='description']").setAttribute("content",e),document.querySelector("meta[property='og:description']").setAttribute("content",e),document.querySelector("meta[property='twitter:description']").setAttribute("content",e),l?.description&&(l.description=e)}if(t?.thumbnail&&t?.author&&t?.date&&e){const i=`https://smalldevtalk.net/src/articleArchive/author${t.author.split(" ").join("")}/${t.date}_${e}/${t.thumbnail}`;document.querySelector("meta[property='og:image']").setAttribute("content",i),document.querySelector("meta[property='twitter:image']").setAttribute("content",i),l?.image&&(l.image=i)}l&&(document.querySelector("script[type='application/ld+json']").textContent=JSON.stringify(l))}}static addToPage(){ArticleFiller.article=converter.makeHtml(ArticleFiller.articleMd),ArticleFiller?.article?.trim()?.length<1&&ArticleFiller?.articleMd?.trim()?.length>0?ArticleFiller.displayError("Article content could not be converted to HTML."):document?.getElementById("articleBody")&&(document.getElementById("articleBody").innerHTML=ArticleFiller.article)}static retrievePageData(){const t=new XMLHttpRequest;t.responseType="json",t.onreadystatechange=()=>{t.readyState===XMLHttpRequest.DONE&&200===t.status&&(ArticleFiller.pageData=t.response,ArticleFiller.callArticle())},t.open("GET","/src/legacyPages/legacyPagesDisplay.json"),t.send()}static callDisplay(){let t=[];const e=document.URL.split("?");e.length>1?(t=e[1].split("&"),ArticleFiller.whatPageDisplay=t[1]):(t=[],ArticleFiller.whatPageDisplay="index"),ArticleFiller.pageURL=t,1===ArticleFiller.pageURL.length?ArticleFiller.callPageDisplay=!1:(ArticleFiller.callPageDisplay=!0,"archive"===ArticleFiller.whatPageDisplay?ArticleFiller.displayArchive():ArticleFiller.changeCarousel())}static displayArchive(){document.getElementById("featuredArticles")&&document.getElementById("featuredArticles").setAttribute("hidden",!0),document.getElementById("articleBody")&&document.getElementById("articleBody").removeAttribute("hidden");let t="";const{articleData:e}=ArticleFiller;if(e)for(const[l,i]of Object.entries(e))if(i&&i.title&&i.author&&i.date&&i.thumbnail){t.trim().length<1&&(t+='\n\t\t\t\t\t\t<div class="container-fluid">\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t');const e=`src/articleArchive/author${i.author.split(" ").join("")}/${i.date}_${l}/${i.thumbnail}`;t+=`\n\t\t\t\t\t<div class="col-sm archive-display">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclass="archive-link"\n\t\t\t\t\t\t\thref="${document.location.origin}/index.html?${l}"\n\t\t\t\t\t\t\taria-label="Redirect to ${i.title}"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<p class="archive-title">${i.title}</p>\n\t\t\t\t\t\t\t<img src=${e} alt="${i.title}'s thumbnail" loading="lazy">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t`}t.trim().length>0&&(t+="</div></div>",document.getElementById("displayArticles").innerHTML+=t)}static changeCarousel(){const t=ArticleFiller.whatPageDisplay[0].toUpperCase()+ArticleFiller.whatPageDisplay.substring(1,ArticleFiller.whatPageDisplay.length);if(document.getElementById("pageTitle")&&(document.getElementById("pageTitle").innerText=`Small Dev Talk: ${t}`),ArticleFiller&&ArticleFiller.pageData&&ArticleFiller.articleData&&ArticleFiller.pageData[ArticleFiller.whatPageDisplay]&&ArticleFiller.pageData[ArticleFiller.whatPageDisplay].carousel&&document.getElementById("carouselInner")){const t=ArticleFiller.pageData[ArticleFiller.whatPageDisplay].carousel;document.getElementById("carouselIndicator")&&(document.getElementById("carouselIndicator").innerHTML=""),document.getElementById("carouselInner").innerHTML="";for(let e=0;e<t.length;e+=1){const l=`author${ArticleFiller.articleData[t[e]].author.split(" ").join("")}`,i=`${ArticleFiller.articleData[t[e]].date}_${t[e]}`,r=ArticleFiller.articleData[t[e]].thumbnail,a=ArticleFiller.articleData[t[e]].title,n=ArticleFiller.articleData[t[e]].summary,c=`/src/articleArchive/${l}/${i}/${r}`;let s=`\n\t\t\t\t\t<li\n\t\t\t\t\t\tdata-target="#carouselExampleIndicators"\n\t\t\t\t\t\tdata-slide-to="${e}"\n\t\t\t\t\t\t${0===e?'class="active"':""}\n\t\t\t\t\t></li>\n\t\t\t\t`;document.getElementById("carouselIndicator")&&(document.getElementById("carouselIndicator").innerHTML+=s),s=`\n\t\t\t\t\t<div class="carousel-item ${0===e?"active":""}">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tid="carouselLink${e}"\n\t\t\t\t\t\t\thref="index.html?${t[e]}"\n\t\t\t\t\t\t\taria-label="Redirect to ${a}"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tid="carouselImage${e}"\n\t\t\t\t\t\t\t\tsrc="${c}"\n\t\t\t\t\t\t\t\tclass="d-block w-100"\n\t\t\t\t\t\t\t\tstyle="width:100%; max-height: 400px !important;"\n\t\t\t\t\t\t\t\tloading="lazy"\n\t\t\t\t\t\t\t\talt="Carousel image for ${a}"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="carousel-caption d-md-block"\n\t\t\t\t\t\t\t\tstyle="text-shadow: 0 0 3px #000000;"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h5 id="carouselHeader${e}">${a}</h5>\n\t\t\t\t\t\t\t\t<p id="carouselParagraph${e}">${n}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t`,document.getElementById("carouselInner").innerHTML+=s}}ArticleFiller.ArticleFiller()}static ArticleFiller(){if(ArticleFiller&&ArticleFiller.pageData&&ArticleFiller.articleData&&ArticleFiller.pageData[ArticleFiller.whatPageDisplay]&&ArticleFiller.pageData[ArticleFiller.whatPageDisplay].displayArticles){const t=ArticleFiller.pageData[ArticleFiller.whatPageDisplay].displayArticles;if(document.getElementById("displayArticles").innerHTML="",t&&t.length>0)for(const e in t)if(ArticleFiller.articleData[t[e]]){const l=`author${ArticleFiller.articleData[t[e]].author.split(" ").join("")}`,i=`${ArticleFiller.articleData[t[e]].date}_${t[e]}`,r=ArticleFiller.articleData[t[e]].thumbnail,a=ArticleFiller.articleData[t[e]].title,n=ArticleFiller.articleData[t[e]].summary,c=ArticleFiller.articleData[t[e]].date,s=`/src/articleArchive/${l}/${i}/${r}`,o=`\n\t\t\t\t\t\t\t<div class="post row" id="featuredArticle${e}">\n\t\t\t\t\t\t\t\t<div class="col-md-4" style="margin-top: 0.5rem;">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref="index.html?${t[e]}"\n\t\t\t\t\t\t\t\t\t\taria-label="Redirect to ${a}"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\tsrc="${s}"\n\t\t\t\t\t\t\t\t\t\t\tclass="img-fluid"\n\t\t\t\t\t\t\t\t\t\t\tloading="lazy"\n\t\t\t\t\t\t\t\t\t\t\talt="Thumbnail for ${a}"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="col-md-8" style="margin-top: 0.5rem;">\n\t\t\t\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref="index.html?${t[e]}"\n\t\t\t\t\t\t\t\t\t\t\taria-label="Redirect to ${a}"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t${a}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="col-12" style="margin-top: 0.5rem;">\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t${n}\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref="index.html?${t[e]}"\n\t\t\t\t\t\t\t\t\t\t\taria-label="Read more of ${a}"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tRead More\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="col-12">\n\t\t\t\t\t\t\t\t\t<p class="details">\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref="index.html?${t[e]}"\n\t\t\t\t\t\t\t\t\t\t\taria-label="Redirect to ${a}"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t${c}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;document.getElementById("displayArticles").innerHTML+=o}}}}function init(){ArticleFiller.retrievePageData(),ArticleFiller.retrieveArticleData()}function changeCarouselSlide(t){const e="active",l=document.getElementsByClassName("carousel-item");if(!l||!l.length)return;const i=Array.from(l).find((t=>t.classList.contains(e)));if(!i)return void l[0].classList.add(e);const r="next"===t?(Array.from(l).indexOf(i)+1)%l.length:(Array.from(l).indexOf(i)-1+l.length)%l.length;i.classList.remove(e),l[r].classList.add(e)}"undefined"!=typeof module&&module.exports&&(module.exports={ArticleFiller:ArticleFiller}),window.onload=init;